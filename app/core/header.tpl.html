<nav data-ng-controller="HeaderCtrl as header" class="navbar navbar-inverse" role="navigation">
  <div class="container-fluid">
    <div class="navbar-header">
      <button class="navbar-toggle collapsed" type="button" data-ng-init="navCollapsed = true" data-ng-click="navCollapsed = !navCollapsed">
        <span class="sr-only">Toggle Navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#/"><i class="fa fa-line-chart"></i> TrackMy<em>Tries</em></a>
    </div>

    <div class="collapse navbar-collapse" collapse="navCollapsed">
      <ul class="nav navbar-nav">
        <li ng-click="navCollapsed=!navCollapsed" data-ui-sref-active="active">
          <a data-ui-sref="home">Home</a>
        </li>
        <li data-ng-if="header.currentUser" data-ui-sref-active="active" class="dropdown" dropdown>
          <a role="button" class="dropdown-toggle" dropdown-toggle>Categories
                            <b class="caret"></b>
          </a>
          <ul class="dropdown-menu">
            <li ng-click="navCollapsed=!navCollapsed" data-ng-repeat="category in header.categories">
              <a data-ui-sref="item({categoryId: category._id})">{{category.name}}</a>
            </li>
          </ul>
        </li>
        <li ng-click="navCollapsed=!navCollapsed" data-ui-sref-active="active">
          <a data-ui-sref="about">About</a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="hidden-xs" ng-if="header.currentUser">
          <p class="navbar-text">Logged in:</p>
        </li>
        <li data-ui-sref-active="active" class="dropdown" dropdown>
          <a role="button" class="dropdown-toggle" dropdown-toggle><strong>{{ header.currentUser.name || "User"}}</strong>
                            <b class="caret"></b>
          </a>
          <ul class="dropdown-menu">
            <li>
              <a ng-if="!header.currentUser" data-ui-sref="signup">Sign Up</a>
              <a ng-if="!header.currentUser" data-ui-sref="signin">Sign In</a>
              <a ng-if="header.currentUser && header.currentUser.loginType === 'local'" data-ui-sref="password">Change Password</a>
              <a href="#" ng-if="header.currentUser" data-ng-click="header.signout()">Sign Out</a>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>
