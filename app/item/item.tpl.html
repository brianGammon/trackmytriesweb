<h4>{{item.category.name}} History</h4>

<alert data-ng-if="item.errorMessage" type="danger" close="item.errorMessage = null">
  {{item.errorMessage.message || item.errorMessage}}
</alert>

<alert data-ng-if='item.loading' type="warning">
  <span class="glyphicon glyphicon-refresh spinning"></span> Hold on, loading your Tries...
</alert>

<alert data-ng-if="item.stats.best" type="info">
  <span>Your Personal Record is: <b>{{item.stats.best.valueNumber || item.stats.best.valueTime || 0}}</b> achieved on <b>{{item.stats.best.itemDateTime | date:'MM-dd-yyyy'}}</b> </span>
</alert>

<div class="row" data-ng-if="!item.loading">
  <div class="col-md-12">
    <button type="button" class="btn btn-primary pull-right" ng-click="item.addNew()">Log a Try</button>
  </div>
</div>
<div class="row">
  <div class="col-md-7">
    <h5>Chart</h5>
    <canvas class="chart chart-line" chart-data="item.chartData"
      chart-labels="item.chartLabels" chart-legend="true" chart-series="item.chartSeries"
      chart-options="item.chartOptions">
    </canvas>
  </div>
  <div class="col-md-5">
    <h5>Recent Entries</h5>
    <div>
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th>Date</th>
            <th>Result</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr data-ng-repeat='itm in item.items' ng-class="{info: itm._id == item.stats.best._id}">
            <td>{{itm.itemDateTime | date:'MM-dd-yyyy'}}</td>
            <td>
              {{itm.valueNumber || itm.valueTime || 0}} <span data-ng-if='itm._id === item.stats.best._id' class="badge">PR</span>
              <a class="btn btn-small" ng-if="itm.notes">
                <span tooltip="{{itm.notes}}" class="glyphicon glyphicon-comment" aria-hidden="true"></span>
              </a>
            </td>
            <td>
              <a class="btn btn-small" ng-click="item.edit(itm)">
                <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
              </a>
              <a class="btn btn-small" ng-click="item.delete($index)">
                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
              </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
